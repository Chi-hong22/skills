---
name: research-weekly-report
description: 将日报内容转换为结构化的科研周报。用于生成学术周报（包含研究方法、技术路线、核心模型、仿真结果、存在问题、难点问题、解决思路、论文进度等核心板块），支持自动提取tags、LaTeX公式格式化、图文联动。当用户需要基于日报生成周报、整理科研进展、向导师汇报时使用。
---

<!--
Input: 用户提供的日报内容（文本或文件路径），日报需包含 frontmatter（tags、日期）和正文（含【日期·分类】标注）
Output: 结构化的科研周报 Markdown 文件，包含9大核心板块，带有正确的 Obsidian frontmatter
Pos: 科研工作流中的周期性汇报节点，连接日常记录与正式汇报的桥梁
一旦我被更新，务必更新我的开头注释，以及所属的文件夹的 README.md
-->

# Research Weekly Report

## 概述

本 Skill 帮助研究人员将碎片化的日报记录转换为结构化的科研周报，用于向导师或团队汇报。

**核心功能**:
- 从多日日报中自动提取和聚合信息
- 按照核心板块灵活组织周报内容（根据实际情况选择性包含）
- 自动提取并管理 tags（从日报 frontmatter 中获取）
- 格式化数学公式为标准 LaTeX 格式
- 使用 Obsidian wiki-link 语法插入图片
- 生成包含来源追踪的完整周报
- 输出到 Obsidian Vault 指定位置

**适用场景**:
- 每周向导师汇报科研进展
- 整理多日工作记录为系统性报告
- 需要按项目/专题组织研究内容
- 涉及实验数据、论文撰写、代码开发的综合性工作

## 工作流程

### 步骤 1: 收集日报内容

用户提供本周的日报内容，可以通过以下方式：
- 直接粘贴日报文本
- 提供日报文件的路径或文件夹引用（如 `@daily-logs/`）
- 提供包含多个日报的 Markdown 文件

**日报内容要求**:
- 包含 YAML frontmatter，至少有 `tags` 字段
- 正文中使用 `【YYYY-MM-DD·分类】` 标注来源
- 常见分类标签：代码编写、实验测试、文献阅读、论文撰写、学术交流、自我提升、灵感思考

**示例日报条目**:
```
---
tags:
  - 实验/深度学习
  - 项目/图像分割
---

2025-08-21 | 实验测试：引入ASPP后，训练初期loss震荡严重，但最终mIoU达到65.1%。【2025-08-21·实验测试】
2025-08-22 | 论文撰写：完成实验部分表格绘制，补充了损失函数公式。【2025-08-22·论文撰写】
```

### 步骤 2: 分析日报并提取信息

读取日报后，执行以下分析：

1. **提取元数据**:
   - 从 frontmatter 提取所有 tags
   - 识别日期范围（最早和最晚的日期）
   - 自动去重并保持 tags 的层级结构

2. **识别项目/专题**:
   - 根据内容关键词（模型名、数据集、研究主题）聚类
   - 将相关的日报条目归类到同一项目下
   - 识别项目的核心研究问题

3. **提取关键信息**:
   - 实验指标和数据
   - 数学公式（准备格式化）
   - 图片引用和路径
   - 问题和解决方案
   - 论文撰写进度

4. **读取和理解图片**（如果日报包含图片）:
   - 使用 Read 工具读取图片文件
   - 分析图片展示的内容（实验曲线、可视化结果、模型结构等）
   - 理解图片与文字内容的关联
   - 为图片生成准确的描述

### 步骤 3: 生成周报元数据

使用辅助脚本或手动生成周报的 frontmatter：

```yaml
---
标题: 周报_YYMMDD
tags:
  - 日志/周报
  - [从日报中提取的其他 tags]
创建时间: [当前时间]
编辑时间: [当前时间]
---
```

**Tags 管理原则**:
- 总是包含 `日志/周报`
- 从所有日报的 tags 中提取并去重
- 保持原有的层级结构（如 `课题/矢量导航/组合编码`）
- 不创建新的 tags

### 步骤 4: 填充核心板块

按项目/专题组织周报，每个项目根据实际内容选择性包含以下板块（不强制包含所有板块）：

#### 1. 研究内容标题
一句话概括本周该项目的核心工作
- 示例：针对 XXX 问题的多尺度模型改进验证

#### 2. 研究方法
- 描述使用的具体算法、策略、损失函数
- 实验设置（数据集、超参数）
- 涉及公式需用 `$...$` 或 `$$...$$` 包裹
- 标注来源：【日期·分类】

#### 3. 技术路线
- 按步骤描述：预处理 → 模型构建 → 训练 → 验证
- 代码实现的关键逻辑
- 标注来源：【日期·分类】

#### 4. 核心模型
- **模型架构**：名称/版本
- **关键改动**：具体修改点
- 涉及公式需用 `$` 包裹
- 标注来源：【日期·分类】

#### 5. 仿真结果
- **核心指标**：具体数值（带单位）
- **计算公式**：使用 `$$...$$` 包裹
- **对比分析**：与 Baseline 或 SOTA 的对比
- 图片引用：(见图X)
- 标注来源：【日期·分类】

#### 6. 存在问题
- 当前具体遇到的工程或实验问题
- 例如：收敛慢、显存溢出、数据不足
- 标注来源：【日期·分类】

#### 7. 难点问题
- 深层次的理论或机制难点
- 例如：多尺度特征融合的内在冲突
- 标注来源：【日期·分类】

#### 8. 解决思路
- 已执行的尝试
- 基于文献或交流拟定的下一步计划
- 涉及算法需用 `$` 包裹
- 标注来源：【日期·分类】

#### 9. 小论文撰写任务
- **本周进度**：明确完成了哪部分
- **下周计划**：明确下周写作目标
- 标注来源：【日期·分类】

**重要原则**:
- **严格事实导向**：内容完全来源于日报，不臆造
- **灵活包含板块**：只包含有实际内容的板块，避免强行填充或留空
- **去除草稿性质**：避免"待补充"、"数据缺失"、"暂无内容"等表述
- **专业汇报视角**：使用学术化、客观的语言表述
- **保持来源追踪**：所有关键信息后标注【日期·分类】

### 步骤 5: 格式化数学公式

自动识别并格式化数学表达：

**行内公式**（简单表达）:
- 使用 `$...$` 包裹
- 示例：损失函数 `$L = L_{CE} + \alpha L_{Dice}$`

**独立公式**（复杂公式）:
- 使用 `$$...$$` 包裹
- 示例：
  ```
  $$\text{mIoU} = \frac{1}{N}\sum_{i=1}^{N}\frac{TP_i}{TP_i + FP_i + FN_i}$$
  ```

**LaTeX 语法要点**:
- 希腊字母：`\alpha`, `\beta`, `\gamma`, `\theta`, `\lambda` 等
- 数学符号：`\sum`, `\int`, `\nabla`, `\partial` 等
- 上下标：`x^2`, `x_i`, `x_{ij}` 等
- 分数：`\frac{分子}{分母}`
- 括号：`\left( ... \right)`, `\left\{ ... \right\}`

### 步骤 6: 理解并插入图片

**重要原则**：如果周报涉及图片，必须先阅读和理解图片内容，再结合日报文字综合生成周报内容。

**图片处理流程**:

1. **读取图片**：使用 Read 工具读取日报中引用的图片文件
2. **理解图片**：分析图片内容（实验结果、可视化、流程图、模型结构等）
3. **内容关联**：将图片含义与日报文字内容结合，生成准确的描述
4. **插入图片**：使用 Obsidian wiki-link 语法插入

**插入语法**:

基本语法：
```markdown
![[image_name.png]]
```

带描述的语法（推荐）：
```markdown
![[image_name.png|图片描述]]
```

**附图索引部分**：
```markdown
## 附图索引
- **图1**：{基于图片内容的准确描述} 【日期·分类】
![[attachments/周报_260118_image_1.png|网格细胞可视化]]

- **图2**：{基于图片内容的准确描述} 【日期·分类】
![[attachments/周报_260118_image_2.png|位置细胞响应模式]]
```

**正文中引用**:
- 在相关板块（如"仿真结果"）直接插入图片并说明
- 结合图片内容撰写分析和结论
- 确保文字描述与图片展示的信息一致

**示例**：
```markdown
### 5. 仿真结果
- **核心指标**：改进后的模型在验证集上达到 $\text{mIoU} = 65.1\%$。【2025-08-21·实验测试】
- **训练曲线**：如下图所示，训练初期loss存在震荡，约50个epoch后趋于稳定。

![[attachments/training_curve.png|训练Loss曲线与mIoU变化]]
```

### 步骤 7: 输出周报文件

生成完整的周报 Markdown 文件，保存到指定位置。

**默认输出路径**:
```
/04_自我管理/00_日志/{YYYY}/{MM}/周报_{YYMMDD}.md
```

**输出文件结构**:
```markdown
---
标题: 周报_YYMMDD
tags:
  - 日志/周报
  - [其他相关 tags]
创建时间: [时间戳]
编辑时间: [时间戳]
---

# 周报_YYMMDD

**汇报人**：{姓名}
**时间范围**：YYYY-MM-DD 至 YYYY-MM-DD（第X周）
**关键进展摘要**：
- {摘要点1}
- {摘要点2}

---

## 项目一：{项目名称}

### 1. 研究内容标题
...

### 2. 研究方法
...

### 3. 技术路线
...

[根据实际内容选择性包含其他板块：核心模型、仿真结果、存在问题、难点问题、解决思路、小论文撰写任务]

---

## 项目二：{项目名称}
...

---

## 附图索引（如有图片）
![[image.png|描述]]
...
```

## 核心板块映射规则

日报分类标签与周报板块的对应关系（灵活选择）：

| 日报分类标签 | 可映射的周报板块 |
|------------|---------|
| 代码编写 | 技术路线、核心模型、实现细节 |
| 实验测试 | 研究方法、仿真结果、存在问题 |
| 文献阅读 | 理论依据、解决思路、难点背景 |
| 论文撰写 | 小论文撰写任务及本周论文进度 |
| 学术交流 | 决策/方向调整（体现在多个板块） |
| 自我提升、灵感思考 | 难点突破、方法论来源 |

**使用原则**：根据日报实际内容选择包含的板块，无需强制包含所有9个板块。

## 使用辅助资源

### Scripts

本 Skill 提供辅助脚本用于自动化处理：

**`scripts/generate_weekly_report.py`**:
- 生成周报元数据（标题、日期范围、周次）
- 从日报文件中提取 tags
- 计算输出路径
- 生成周报模板结构

使用方法：
```bash
python scripts/generate_weekly_report.py --input <日报文件夹> --output <输出路径>
```

### References

详细的参考文档位于 `references/` 目录：

**`references/prompt.md`**:
- 完整的科研周报生成提示词
- 包含详细的 Background, Profile, Skills, Goals, Constraints, Workflow, OutputFormat, Example
- 在需要深入理解周报生成逻辑时阅读

**`references/example_output.md`**:
- 实际的成品周报示例
- 展示最终输出的格式和质量标准
- 可作为生成周报时的参考模板

**`references/obsidian_template.md`**:
- Obsidian 模板插件的周报模板设计
- 说明元数据字段的含义和自动化逻辑
- 理解文件管理和路径计算规则

## 快速开始示例

**用户请求**:
"帮我生成本周的科研周报，日报内容在 @daily-logs/2026-01/ 文件夹中"

**处理流程**:
1. 读取 `daily-logs/2026-01/` 中的所有日报文件
2. 提取 frontmatter 中的 tags，去重后加入周报
3. **读取并理解图片内容**（如果日报包含图片引用）
4. 按日期和内容聚类识别项目（如："RatInABox 解码验证"、"点云匹配"）
5. 对每个项目，从日报中提取信息，结合图片内容，灵活填充核心板块
6. 格式化所有数学公式为 LaTeX 格式
7. 基于图片实际内容生成准确描述，使用 wiki-link 语法插入图片
8. 保存到 `/04_自我管理/00_日志/2026/01/周报_260121.md`

**输出确认**:
生成后向用户展示周报内容，确认无误后保存。

## 注意事项

1. **Tags 管理**：只从日报中提取，不创建新 tags
2. **公式格式**：所有数学表达必须用 `$` 或 `$$` 包裹
3. **来源追踪**：保留所有【日期·分类】标注
4. **灵活板块**：根据实际内容选择板块，不强制包含所有板块，避免空内容或强行填充
5. **事实导向**：所有内容必须来源于日报，不臆造信息
6. **图片处理**：
   - 必须先使用 Read 工具读取和理解图片内容
   - 结合图片含义与日报文字综合生成描述
   - 使用 Obsidian wiki-link 语法 `![[image.png|描述]]` 插入图片
   - 确保图片描述准确反映图片实际展示的内容
